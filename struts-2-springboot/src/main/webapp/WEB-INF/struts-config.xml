<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
    "http://struts.apache.org/dtds/struts-config_1_3.dtd">

<struts-config>

    <!-- ========== Form Bean Definitions ========== -->
    <form-beans>
        <form-bean name="accountForm" 
                   type="com.redhat.bank.form.AccountForm"/>
        <form-bean name="transactionForm" 
                   type="com.redhat.bank.form.TransactionForm"/>
    </form-beans>

    <!-- ========== Global Exception Definitions ========== -->
    <global-exceptions>
        <exception key="error.general"
                   type="java.lang.Exception"
                   path="/error.jsp"/>
    </global-exceptions>

    <!-- ========== Global Forward Definitions ========== -->
    <global-forwards>
        <forward name="welcome" path="/welcome.do"/>
        <forward name="error" path="/error.jsp"/>
    </global-forwards>

    <!-- ========== Action Mapping Definitions ========== -->
    <action-mappings>
        
        <!-- Welcome/Home Action -->
        <action path="/welcome"
                type="com.redhat.bank.action.ListAccountsAction"
                scope="request">
            <forward name="success" path="/list.jsp"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- List All Accounts -->
        <action path="/listAccounts"
                type="com.redhat.bank.action.ListAccountsAction"
                scope="request">
            <forward name="success" path="/list.jsp"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- View Single Account -->
        <action path="/viewAccount"
                type="com.redhat.bank.action.ViewAccountAction"
                scope="request">
            <forward name="success" path="/view.jsp"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- Edit Account Form (load form) -->
        <action path="/editAccount"
                name="accountForm"
                type="com.redhat.bank.action.EditAccountAction"
                scope="request"
                validate="false">
            <forward name="success" path="/edit.jsp"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- Save Account (create or update) -->
        <action path="/saveAccount"
                name="accountForm"
                type="com.redhat.bank.action.SaveAccountAction"
                scope="request"
                validate="true"
                input="/edit.jsp">
            <forward name="success" path="/listAccounts.do" redirect="true"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- Delete Account -->
        <action path="/deleteAccount"
                type="com.redhat.bank.action.DeleteAccountAction"
                scope="request">
            <forward name="success" path="/listAccounts.do" redirect="true"/>
            <forward name="error" path="/error.jsp"/>
        </action>

        <!-- Process Transaction (deposit/withdraw) -->
        <action path="/transaction"
                name="transactionForm"
                type="com.redhat.bank.action.TransactionAction"
                scope="request"
                validate="true"
                input="/view.jsp">
            <forward name="success" path="/listAccounts.do" redirect="true"/>
            <forward name="error" path="/error.jsp"/>
        </action>

    </action-mappings>

    <!-- ========== Message Resources Definitions ========== -->
    <message-resources parameter="MessageResources"/>

    <!-- ========== Plug Ins Configuration ========== -->
    
</struts-config>

